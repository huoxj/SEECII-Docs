# 文档Lab03-需求规格说明书

## **文档作者**

主要编写者：史创屹、董天诺

其他编写者：刘存玺、杨枫

## **文档修改历史**

| 修改人员 | 日期 | 修改原因 | 版本号 |
| --- | --- | --- | --- |
| 史创屹 | 2024-04-02 | 撰写初版 | v0.1 |
| 董天诺 | 2024-04-02 | 撰写用户界面模块 | v1.0 |
| 刘存玺 | 2024-04-03 | 润色文档 | v1.1 |
| 史创屹 | 2024-04-17 | 补充查看与修改用户信息功能 | v1.2 |
| 刘存玺 | 2024-06-01 | 根据开发需求更新功能需求以及数据需求 | v2.0 |

## **引言**

### **1.1 目的**

本文档描述了 **Blue Whale 蓝鲸商城** 的功能需求和非功能需求。开发小组的软件系统实现与验证工作都以此文档为依据。

除特殊说明之外，本文档所包含的需求都是高优先级需求。

### **1.2 范围**

- 将要开发的软件产品为蓝鲸商城网购平台
- 软件专用于销售国货、有中国特色的**网购平台**，将服务对象拓展到全国顾客。

### **1.3 参考文献**

- 丁二玉 刘钦《软件工程与计算 卷2 软件开发的技术基础 》

## **总体描述**

### **2.1 项目前景**

- 随着国货热潮的兴起，消费者对国内品牌的需求将持续增长，特别是在新冠疫情等事件中展现出的国产品牌的责任与担当，进一步激发了消费者的购买热情。**Blue Whale 蓝鲸商城**能够满足消费者对国货的强烈需求，也能为国内品牌提供更多曝光和销售机会。
- 通过结合买菜平台的次日送达与网购平台的快递送达两种销售方式，能够更好地满足本地和全国消费者的不同需求。这种灵活的销售模式将使消费者更加方便地购买到他们喜爱的国货产品，提升用户体验，增加用户粘性。

### **2.1.1 背景与机遇**

- **背景**
  
    在疫情之后，国货品牌受到了更多关注和支持。消费者对国内品牌的信任度和认可度提高。
    
- **机遇**
    - 国货的热潮、消费者对国货的购买热情高涨，为项目带来无穷生命力。
    - 结合买菜平台的次日送达与网购平台的快递送达两种销售方式，能够灵活地满足本地和全国消费者的不同需求，提高用户满意度。
    - 目前尚未有专门针对国货销售的网购平台，商场可以抓住市场空缺的机会，在市场上占据先机，满足消费者对国货的需求。

### **2.1.2 业务需求**

- 用户能得到良好的线下自提以及线上邮寄的网购体验
- 商场管理人员和门店工作人员能够对商店商品进行有效的管理
- CEO和门店工作人员能够管理经营状况

### **2.2 项目功能**

- 用户账户管理功能：用户可以注册账户、登录、修改个人信息等。

- 商品浏览功能：用户可以浏览各类商品，并通过关键词搜索、分类筛选、排序等方式快速找到所需商品。
- 商品详情页：展示商品详细信息，包括价格、规格、图片、用户评价等，帮助用户做出购买决策。
- 订单功能：用户可以对满意的商品进行下单并支付，对订单进行一系列确认，最终对订单做出评价
- 商品商店管理功能：用户可以管理其所在商店，包括创建商品等功能
- 优惠券功能：用户可以创建优惠券组，领取和使用优惠券
- 订单报表功能：用户能够下载商店或者全局的订单报表

### **2.3 用户特征**

| 用户角色 | 用户特征 |
| --- | --- |
| 门店工作人员 | 有线下销售渠道 |
| 电商 | 只做线上销售 |
| 顾客 | 有购物意向 |
| 经理 | 关心商场的经营情况 |

### **2.4 约束**

- 高阶语言要求：前端使用`Vue3`框架、`Vite`构建工具进行开发，后端使用`SpringBoot` + `JPA` + `MySQL`
- 安全性考虑：
    - 支付安全：软件涉及到的支付功能要有安全性保障
    - 账号安全：软件对用户的登录密码要加密传输

### **2.5 假设与依赖**

- 无

## **详细需求描述**

### **3.1 对外接口需求**

### **3.1.1 用户界面**

- 用户界面以1920×1080的分辨率，100%缩放为标准设计。

- 界面字体、图标、按钮等控件均来自Element-plus组件库。

- GUI的布局标准与操作
    
    - 登录界面：界面中心有登录界面主要内容的卡片，卡片内有用户手机号、密码的输入框
    
    - 注册界面：界面顶部左对齐显示标题“创建一个新的账户”。界面上显示昵称、身份、注册手机号、地址、密码和确认密码输入框，其中身份输入框通过下拉菜单选择顾客、管理人员或商家。
        - 对于管理人员的注册界面，还需要显示邀请码输入框。
        - 对于商家的注册界面，还需要显示邀请码和所属商店输入框，所属商店输入框通过下拉菜单选择所属商店。
    
        界面底部显示“创建账户”和“去登录”按钮，其中“创建账户”按钮使用强调色。点击后可分别创建账户和跳转到登录界面。
    
    - 用户信息页面：页面左栏显示个人信息，用户可以查看自己身份、头像等个人信息，页面中间显示修改密码页面，显示密码和确认密码输入框。个人信息右上角显示“修改个人信息”按钮，使用强调色，点击后显示修改页面，可以修改昵称和手机号，右上角显示“更新”按钮，点击完成更新
    
    - 广场界面：界面顶部显示搜索框和搜索按钮，搜索按钮使用强调色，在搜索框中输入并点击搜索按钮可搜索商店。商品和商店界面通过标签栏分为两个界面。商店以矩形卡片方式顺序排列，宽度略小于界面宽度。对于每个卡片，左边显示正方形商店logo，右边从上到下依次显示商店名称、商店评分和商店简介，其中商店评分包括星级显示和数字显示。卡片中所有内容均左对齐。点击卡片可进入商店详情界面。页面右下角显示回顶部按钮，点击后即可回到页面顶部。
        - 对于商场管理员的商店列表界面，所有商店卡片上方显示“创建商店”按钮，宽度与一般商店卡片相同，点击后可进入创建商店详情界面。
    
    - 创建商店界面：界面顶部左对齐显示“创建商店”标题，下方从上到下依次显示商店名称和商店介绍输入框，以及商店logo上传框，可通过拖拽或点击上传图片，下方显示已上传的图片。界面右下角显示“确定创建”按钮，使用强调色，点击后，若输入的商店信息合法即可成功创建商店。
    
    - 商店详情界面：界面左侧边栏从上到下依次显示商店logo、商店名称、商店简介和商店评分，所有内容均居中。右侧主界面顶部显示搜索框和搜索按钮，搜索按钮使用强调色，在搜索框中输入并点击搜索按钮可搜索商店中的商品。下方左对齐显示标题“商品列表”。标题下方，商品以正方形卡片方式网格状排列。对于每个卡片，从上到下依次显示正方形商品缩略图、商品名称和商品价格，其中价格使用橙色加粗显示。卡片中所有内容均左对齐。点击卡片可进入商品详情界面。
        - 对于商家的商店详情界面，商品列表的第一位需要显示“添加商品”卡片，该卡片的大小与一般商品卡片相同，卡片上显示“添加商品”标题和加号图标。点击加号图标可打开右侧“创建商品”边栏。边栏中从上到下依次显示商品名称、商品简介、商品分类和商品库存输入框，以及商品展示图片上传框，可通过拖拽或点击上传图片，下方显示已上传的图片。所有商品卡片右下角还需要显示“更改库存”按钮，使用强调色，点击后弹出“更改库存”提示框，其中包含数字输入框和“生效更改”按钮。
    
    - 商品详情界面：界面顶部需要一个卡片显示商店详情界面中的商店信息。下方需要一个商品详情卡片，卡片左边显示商品的展示图片，以跑马灯的形式自动播放，也可点击图片左右两侧的箭头切换图片。卡片右边从上到下依次左对齐显示商品名称、商品简介、商品价格和“立即购买”按钮，按钮使用强调色。
    
    - 订单列表界面：订单以垂直排列的列表形式展示。每一项表示一个订单的条目，订单条目内水平排布订单的详细信息。
    
    - 订单创建界面：订单创建界面分为三个部分，左上角显示商品的详情信息，右上角显示顾客的订单信息，下方显示优惠券列表和订单的价格
    
    - 评论界面：使用表单安排评论的输入信息，包括评分、文字评论输入框以及图片上传的卡片
    
    - 支付界面：屏幕中间显示一个跳转支付界面的按钮提示用户跳转到支付宝的页面
    

### **3.1.2 硬件接口**

- 无

### **3.1.3 软件接口**

- JRE：运行后端的服务器需要安装Java运行环境
- 数据库：数据库使用Mysql

### **3.1.4 通信接口**

- 软件需要使用Web浏览器进行前端渲染
- 前端对服务器使用HTTP REST API对服务端进行通信
- 软件使用阿里云OSS服务实现文件存储
- 支付宝后台通过系统提供的回调函数接口实现支付的确认

### **3.2 功能需求**

#### 3.2.1 用户账户管理功能

- **3.2.1.1 特性描述**
  
    用户可以注册账户、登录、修改个人信息等
    
    优先级=高
    
- **3.2.1.2 刺激 / 相应序列**
  
  
    | 刺激 | 响应 |
    | --- | --- |
    | 用户点击“登录” | 系统进入相应用户界面 |
    | 用户点击“注册” | 系统进入新用户注册界面 |
    | 用户点击“更新个人信息” | 系统向用户返回更改成功或失败的消息 |
- **3.2.1.3 相关功能需求**
  
  
    | 功能 | 详细需求描述 |
    | --- | --- |
    | 用户输入手机号等信息 | 系统允许用户输入手机号、密码等信息并保证格式合法 |
    | 用户确定账号身份 | 系统允许用户选择账号身份，对账号身份进行检测，给予用户不同的权限 |
    | 用户输入邀请码和所属商店 | 商家、商场管理人员等需依赖邀请码注册，以防止无关人员恶意注册，保证商店经营安全 |

#### 3.2.2 商品商店浏览功能

- **3.2.2.1 特性描述**

    用户可以浏览商店列表，并浏览商店下的商品信息

    用户也可以浏览所有商品，并通过关键词搜索、分类筛选、排序等方式快速找到所需商品

    优先级=高

- **3.2.2.2 刺激 / 相应序列**

    | 刺激                       | 响应                                 |
    | -------------------------- | ------------------------------------ |
    | 用户选择商品标签           | 系统展示商品广场页面                 |
    | 用户选择商店标签           | 系统展示商店列表页面                 |
    | 用户点击商店卡片           | 系统跳转到商店的商品列表页面         |
    | 用户点击商品卡片           | 系统跳转到此商品的详细页面           |
    | 用户设置搜索条件并点击搜索 | 系统返回对应搜索条件和顺序的商品列表 |
    | 用户点击翻页               | 商品列表翻页或者跳转到对应页         |

- **3.2.2.3 相关功能需求**

    | 功能             | 详细需求描述                                                 |
    | ---------------- | ------------------------------------------------------------ |
    | 用户浏览商品     | 商品卡片要包含商品的缩略图、名称、价格等信息。系统要为用户提供搜索的方式检索商品，商品列表需要分页进行展示。商品列表需要根据用户的喜好来调整展示的商品、展示的顺序。 |
    | 用户设置搜索条件 | 系统允许用户通过关键词模糊查询、设置价格区间、选择商品类别和商品按价格排序的方式获得搜索结果 |
    | 用户浏览商店     | 商店卡片要包含商店Logo、名称、简介、评分等信息。             |

#### 3.2.3 商品详情页

- **3.2.3.1 特性描述**

    展示商品详细信息，包括价格、规格、图片、用户评价等，帮助用户做出购买决策

    优先级=高

- **3.2.3.2 刺激 / 相应序列**

    | 刺激                   | 响应                     |
    | ---------------------- | ------------------------ |
    | 用户选择商品介绍标签   | 系统展示商品的介绍图片流 |
    | 用户选择商品评论区标签 | 系统展示商品评论区       |

- **3.2.3.3 相关功能需求**

    | 功能                   | 详细需求描述                                                 |
    | ---------------------- | ------------------------------------------------------------ |
    | 用户浏览商品的详细信息 | 商品详细信息页要包括商品所属商店的信息、商品名称、库存、价格、评分、商品详情图片、评论区等信息 |

#### 3.2.4 订单功能

- **3.2.4.1 特性描述**

    用户可以对满意的商品进行下单并支付，对订单进行一系列确认，最终对订单做出评价

    优先级=高

- **3.2.4.2 刺激 / 相应序列**

    | 刺激                   | 响应                                           |
    | ---------------------- | ---------------------------------------------- |
    | 用户点击立即购买       | 系统跳转到结算页                               |
    | 用户选择优惠券         | 系统返回使用优惠券后的商品价格                 |
    | 用户点击下单           | 系统创建订单并跳转到支付页                     |
    | 用户点击返回           | 系统放弃创建订单并返回之前的界面               |
    | 用户点击跳转至支付页面 | 系统新建支付标签页                             |
    | 用户支付               | 系统显示支付成功或失败的消息，并返回之前的页面 |
    | 用户点击已发货         | 订单状态显示为已发货                           |
    | 用户点击已收货         | 订单状态显示为已收货                           |
    | 用户点击评价订单       | 系统跳转到评价页面                             |

- **3.2.4.3 相关功能需求**

    | 功能             | 详细需求描述                                                 |
    | ---------------- | ------------------------------------------------------------ |
    | 用户下订单       | 顾客可以创建订单，创建订单的时候可以选择订单的提货方式、联系方式、商品数量，并且随后可以支付订单、确认收货<br />而商家可以对自己商店的订单进行发货的确认 |
    | 用户确认订单收货 | 字面意思                                                     |
    | 用户评价订单     | 顾客可以对订单进行评价，评价内容包括评分、文字评价、图片评价 |
    | 用户使用优惠券   | 用户使用优惠券后的优惠价格应该有提示。用户可以叠加使用优惠券 |
    | 用户确认订单发货 | 商家可以在用户支付订单后确认订单发货                         |
    | 用户确认订单收货 | 顾客可以在商家发货后确认订单收货                             |
    | 支付             | 用户需要通过支付宝进行支付，系统需要支持支付宝支付           |

#### 3.2.5 商品商店管理功能

- **3.2.5.1 特性描述**

    商家可以管理其所在商店，包括创建商品等功能

    商城管理人员可以创建商店

    优先级=高

- **3.2.5.2 刺激 / 相应序列**

    | 刺激                  | 响应                                                      |
    | --------------------- | --------------------------------------------------------- |
    | 用户点击创建商店/商品 | 系统跳转创建商店/商品界面                                 |
    | 用户点击创建商店/商品 | 系统对合法的商店/商品信息进行创建，对不合法的信息做出提示 |
    | 用户点击更改库存      | 系统弹出修改库存的弹窗                                    |
    | 用户点击确认更改      | 系统接受更改并且关闭弹窗                                  |

- **3.2.5.3 相关功能需求**

    | 功能     | 详细需求描述                                                 |
    | -------- | ------------------------------------------------------------ |
    | 创建商店 | 商店的信息包括名称、商店Logo、商店简介等信息。系统只接受合法的信息 |
    | 创建商品 | 商品的信息包括名称、商品简介、商品展示图、商品详情图等信息。系统只接受合法的信息，图片数量要大于等于2 |
    | 更改库存 | 用户可以更改商品的库存，库存应该是0到999之间的整数           |

#### 3.2.6 优惠券功能

- **3.2.6.1 特性描述**

    用户可以创建优惠券、领取和使用优惠券

    优先级=中

- **3.2.6.2 刺激 / 相应序列**

    | 刺激                 | 响应                                   |
    | -------------------- | -------------------------------------- |
    | 用户点击领取优惠券   | 优惠券被领取，系统显示已领取           |
    | 用户点击创建优惠券组 | 系统显示创建优惠券的弹窗               |
    | 用户确认创建优惠券组 | 系统根据用户输入的优惠券组信息就行创建 |

- **3.2.6.3 相关功能需求**

    | 功能         | 详细需求描述                                                 |
    | ------------ | ------------------------------------------------------------ |
    | 发布优惠券组 | 门店工作人员能发布本门店的优惠券组，经理可以发布全局的优惠券组。优惠券组分为满减券和蓝鲸券，满减券需要设置满减门槛和金额，蓝鲸券根据订单价格确定折扣 |
    | 浏览优惠券   | 用户可以浏览所有的优惠券组，并且可以通过筛选条件筛选出想浏览的优惠券组。优惠券组需要包括优惠券类型、所属商店或全局、满减门槛和金额、蓝鲸券折扣、领取进度等信息 |
    | 领取优惠券   | 顾客可以领取优惠券                                           |

#### 3.2.7 订单报表功能

- **3.2.7.1 特性描述**

    用户能够下载商店或者全局的订单报表

    优先级=低

- **3.2.7.2 刺激 / 相应序列**

    | 刺激                 | 响应                          |
    | -------------------- | ----------------------------- |
    | 用户点击下载订单报表 | 系统向浏览器返回报表excel表格 |

- **3.2.7.3 相关功能需求**

    | 功能             | 详细需求描述                                                 |
    | ---------------- | ------------------------------------------------------------ |
    | 用户下载订单报表 | 门店工作人员可以下载其所在商店的报表，经理可以下载全局的订单报表 |


### **3.3 非功能需求**

### **3.3.1 安全性**

系统需要保护用户的个人信息和交易数据不被泄露或篡改，用户的密码信息需要加密传输。

对于前端的请求，需要实现接口鉴权，只允许身份正确的用户访问后端提供的服务

### **3.3.2 可维护性**

项目需要考虑到后续的维护和扩展，因此需要遵循良好的代码规范和设计原则，确保代码的可读性、可维护性和可扩展性。

### **3.3.3 易用性**

考虑到用户可能使用不同的操作系统和设备访问软件，项目需要确保在主流操作系统（如Windows、macOS、iOS、Android等）上能够正常运行，并且在不同浏览器（如Chrome、Safari、Firefox等）上有良好的兼容性。

### **3.3.4 可靠性**

系统需要保持稳定的运行状态，避免因为软件bug、系统崩溃等原因导致系统不稳定或服务中断。

### **3.3.5 业务规则**

项目需要遵守相关的法律法规和行业标准，如知识产权、电子商务法、消费者权益保护法等，确保项目的合法性和合规性。

### **3.3.6 约束**

- **技术约束：** 项目要求使用特定的技术栈或框架进行开发，以保持一致性和统一性。
- **人员约束：**项目开发者对使用的框架和技术栈并不熟悉
- **时间和预算约束：** 项目受限于时间和预算，需要在限定的时间和资源内完成开发、测试，因此需要合理规划项目进度和资源分配。

### **3.4 数据需求**

### **3.4.1 数据定义**

- 用户（user）

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| id | unique identifier & not null & primary key | 图片id |
| name | varchar(255) & not null | 用户名 |
| phone | varchar(255) & not null | 电话号码 |
| password | varchar(255) & not null | 密码 |
| role | varchar(255) & not null | 角色 |
| store_id | int | 所属商店id（仅对店员有效） |
| address | varchar(255) & not null | 地址 |
| create_time | datetime | 注册时间 |
- 邀请码(inviteCode)

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| code | varchar(31) & not null & primary key | 邀请码字符串 |
| role | varchar(31) & not null | 角色 |
- 图片(image)

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| id | unique identifier & not null & primary key | 图片id |
| url | varchar(255) & not null | 图片url |
| type | varchar(255) & not null | 图片所属位置类型，比如属于商店图标还是商品详情图 |
| parent_id | int & not null | 图片所属父亲id（如果是商店图标的话，父亲就是商店） |
| ind | int | 图片的编号 |
- 商店(store)

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| id | unique identifier & not null & primary key | 商店id |
| name | varchar(31) & not null |  |
| description | varchar(255) | 商店简介 |
| rating | float | 商店商品平均评价（所有评价平均数） |
- 商品(item)

| 字段 | 类型 | 备注 |
| --- | --- | --- |
| id | unique identifier & not null & primary key | 商品id |
| name | varchar(31) & not null | 商品名称 |
| description | varchar(255) | 商店简介 |
| price | float & not null | 商品价格 |
| rating | float | 商品评价 |
| store_id | int | 归属商店的id |
| category | String  | 商品分类 |
| inventory | int | 商品库存 |

### **3.4.2 默认数据**

- 无

### **3.4.3 数据格式要求**

- 见数据定义

### **3.5 其他需求**

- 在系统运行过程中要保证OSS文件信息与数据库相关信息的同步
- 保证用户通过网络请求访问、修改数据库的权限正确